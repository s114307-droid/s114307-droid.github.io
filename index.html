<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>叢林裡的海獺</title>
<style>
body {
  margin: 0;
  background: #111;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
canvas {
  border: 2px solid #000;
}
</style>
</head>
<body>

<canvas id="game" width="900" height="550"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// 背景圖片
const bgImage = new Image();
bgImage.src = "images/jungle.jpg";

// 海獺圖片
const otterImage = new Image();
otterImage.src = "images/otter.png";

// 河
const river = { y: 260, height: 120 };

// 海獺
const otter = {
  x: 400,
  y: 290,
  width: 90,
  height: 60,
  speed: 4,
  float: 0
};

const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

let imagesLoaded = 0;
function checkLoaded() {
  imagesLoaded++;
  if (imagesLoaded === 2) {
    requestAnimationFrame(loop);
  }
}

bgImage.onload = checkLoaded;
otterImage.onload = checkLoaded;

bgImage.onerror = () => alert("背景圖片載入失敗");
otterImage.onerror = () => alert("海獺圖片載入失敗");

function update() {
  if (keys["ArrowLeft"]) otter.x -= otter.speed;
  if (keys["ArrowRight"]) otter.x += otter.speed;
  if (keys["ArrowUp"]) otter.y -= otter.speed;
  if (keys["ArrowDown"]) otter.y += otter.speed;

  otter.x = Math.max(0, Math.min(canvas.width - otter.width, otter.x));
  otter.y = Math.max(
    river.y,
    Math.min(river.y + river.height - otter.height, otter.y)
  );

  otter.float += 0.05;
}

function draw() {
  ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "rgba(33,150,243,0.4)";
  ctx.fillRect(0, river.y, canvas.width, river.height);

  const floatY = Math.sin(otter.float) * 4;
  ctx.drawImage(
    otterImage,
    otter.x,
    otter.y + floatY,
    otter.width,
    otter.height
  );
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
</script>

</body>
</html>
